<div class="details-wrapper">
  <!-- LOADING STATE -->
  <div *ngIf="loading" class="state-container">
    <div class="loading-spinner">
      <mat-icon class="spinner-icon">schedule</mat-icon>
      <p>Loading event details...</p>
    </div>
  </div>

  <!-- ERROR STATE -->
  <div *ngIf="!loading && error" class="state-container">
    <div class="error-container">
      <div class="error-content">
        <mat-icon class="error-icon">error_outline</mat-icon>
        <h2 class="error-title">Unable to Load Event</h2>
        <p class="error-message">{{ error }}</p>
        <button mat-raised-button color="primary" routerLink="/events" class="error-action">
          <mat-icon>arrow_back</mat-icon>
          <span>Back to Events</span>
        </button>
      </div>
    </div>
  </div>

  <!-- SUCCESS STATE - EVENT LOADED -->
  <div *ngIf="!loading && !error && event" class="details-container">
    <!-- Navigation -->
    <button mat-button routerLink="/events" class="back-btn">
      <mat-icon>arrow_back</mat-icon>
      <span>Back to Feed</span>
    </button>

    <!-- Event Details Card -->
    <div class="event-details-card">
      <!-- Header Section -->
      <div class="card-header-section">
        <h1 class="event-title">{{ event.title }}</h1>
        <p class="event-status">Upcoming Event</p>
      </div>

      <!-- Content Sections -->
      <div class="card-content">
        <!-- Key Metadata Grid -->
        <div class="metadata-grid">
          <div class="metadata-item">
            <span class="metadata-icon">
              <mat-icon>calendar_today</mat-icon>
            </span>
            <div class="metadata-content">
              <span class="metadata-label">Date</span>
              <span class="metadata-value">{{ event.date | date:'mediumDate' }}</span>
            </div>
          </div>

          <div class="metadata-item">
            <span class="metadata-icon">
              <mat-icon>location_on</mat-icon>
            </span>
            <div class="metadata-content">
              <span class="metadata-label">Venue</span>
              <span class="metadata-value">{{ event.venue }}</span>
            </div>
          </div>

          <div class="metadata-item">
            <span class="metadata-icon">
              <mat-icon>category</mat-icon>
            </span>
            <div class="metadata-content">
              <span class="metadata-label">Category</span>
              <span class="metadata-value">{{ event.category }}</span>
            </div>
          </div>

          <div class="metadata-item">
            <span class="metadata-icon">
              <mat-icon>group</mat-icon>
            </span>
            <div class="metadata-content">
              <span class="metadata-label">Capacity</span>
              <span class="metadata-value">{{ event.capacity || event.attendees?.length || '0' }} Attendees</span>
            </div>
          </div>
        </div>

        <!-- Divider -->
        <div class="card-divider"></div>

        <!-- Description Section -->
        <div class="description-section">
          <h3 class="section-title">About This Event</h3>
          <p class="description-text">{{ event.description }}</p>
        </div>

        <!-- Divider -->
        <div class="card-divider"></div>

        <!-- Action Section -->
        <div class="action-section">
          <div class="action-buttons">
            <button 
              *ngIf="!isUserRegistered()" 
              mat-raised-button 
              color="primary" 
              (click)="register()" 
              class="primary-action">
              <mat-icon>check_circle</mat-icon>
              <span>Register for Event</span>
            </button>
            <button 
              *ngIf="isUserRegistered()" 
              mat-stroked-button 
              (click)="unregister()" 
              class="secondary-action danger">
              <mat-icon>close</mat-icon>
              <span>Unregister</span>
            </button>
          </div>
          <button mat-button routerLink="/events" class="back-action">
            <span>Back to Feed</span>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- EMPTY STATE -->
  <div *ngIf="!loading && !error && !event" class="state-container">
    <div class="empty-container">
      <div class="empty-content">
        <mat-icon class="empty-icon">event_busy</mat-icon>
        <h2 class="empty-title">Event Not Found</h2>
        <p class="empty-message">The event you're looking for doesn't exist or may have been removed.</p>
        <button mat-raised-button color="primary" routerLink="/events" class="empty-action">
          <mat-icon>arrow_back</mat-icon>
          <span>Back to Events</span>
        </button>
      </div>
    </div>
  </div>
</div>