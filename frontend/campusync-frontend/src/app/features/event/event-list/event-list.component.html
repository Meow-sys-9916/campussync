<div class="events-container">
  <!-- ✅ PREMIUM HEADER SECTION -->
  <div class="page-header">
    <div class="header-content">
      <div class="title-section">
        <h1>Upcoming Events</h1>
        <p>Discover what's happening on campus</p>
      </div>
      
      <div class="actions">
        <button mat-raised-button routerLink="/archive" class="archive-btn">
          <mat-icon>history</mat-icon>
          ARCHIVE
        </button>
      </div>
    </div>
  </div>

  <!-- ✅ LOADING STATE -->
  <div *ngIf="isLoading" class="loading-state">
    <p>Loading events...</p>
  </div>

  <!-- ✅ EMPTY STATE -->
  <div *ngIf="!isLoading && upcomingEvents.length === 0" class="empty-state">
    <mat-icon>event_busy</mat-icon>
    <h3>No upcoming events</h3>
    <p>Check the archive for past events!</p>
  </div>

  <!-- ✅ EVENTS CAROUSEL - PREMIUM PRESENTATION -->
  <div class="carousel-section" *ngIf="!isLoading && upcomingEvents.length > 0">
    <div class="carousel-wrapper" #carouselContainer>
      <div class="events-carousel" (scroll)="onScroll()">
        <mat-card *ngFor="let event of upcomingEvents; let i = index" class="event-card" [id]="'card-' + i" [ngClass]="'glow-' + (i % 3)">
          <div class="card-content">
            <div class="event-header">
              <mat-card-title>{{ event.title }}</mat-card-title>
              <mat-chip-set>
                <mat-chip [class]="'status-' + (event.status || 'upcoming')">
                  {{ (event.status || 'UPCOMING') | uppercase }}
                </mat-chip>
              </mat-chip-set>
            </div>

            <mat-card-subtitle>
              {{ event.date | date:'mediumDate' }} • {{ event.venue }}
            </mat-card-subtitle>

            <p class="description">{{ event.description }}</p>

            <div class="meta-info">
              <span><mat-icon>group</mat-icon> {{ event.registeredCount || 0 }} / {{ event.capacity }}</span>
              <span><mat-icon>category</mat-icon> {{ event.category }}</span>
            </div>
          </div>

          <mat-card-actions align="end">
            <button mat-button color="primary" [routerLink]="['/events', event._id || event.id]">
              VIEW DETAILS
            </button>
            
            <!-- Show "REGISTERED" if user already registered, otherwise show "REGISTER" -->
            <button 
              *ngIf="hasRegistered(event._id || event.id || '')"
              mat-flat-button 
              disabled 
              class="registered-btn">
              ✓ REGISTERED
            </button>
            <button 
              *ngIf="!hasRegistered(event._id || event.id || '')"
              mat-flat-button 
              color="primary" 
              (click)="register(event._id || event.id || '')">
              REGISTER
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>
  </div>
</div>